{% extends 'usermanagement/receptionist/receptionist.html' %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'usermanagement/css/viewpatientlist.css' %}">
{% endblock style %}
{% block content %}
<div>
    {% comment %} 1)FirstName, 2)LastName, 3)Condition
    {% endcomment %}
    <span style="text-decoration: solid;">Patient List...</span>  
    
    <hr>
    {% csrf_token %}
    <form style="text-align: center;" action="{% url 'usermanagement:viewpatientlist' %}" method="POST">
        {% csrf_token %}
        <label for="">Name</label>
        <input name='name' type="text" value="{{selectName}}">
        <button>üîç</button>
        <br>
        <hr>
    </form>

    <div style="display: flex;">
        <div style="width: 15%;font-weight: 900;">Patient ID</div>
        <div style="width: 53%;">
            <div style="width: 75%; display: flex;">
                <div style="width: 20%; font-weight: 900;">date</div>
                <div style="width: 25%; font-weight: 900;" >Time</div>
                <div style="width: 23%; font-weight: 900;">Service</div>
                <div style="width: 45%; font-weight: 900;">ConsultationCost</div>
                <div style="width: 1%; font-weight: 900;">Condition</div>
            </div >
        </div>
        <div style="display:flex;width: 17%;">
            <div style="width: 50%; font-weight: 900;">Edit</div>
            <div style="width: 55%; font-weight: 900;">Delete</div>
        </div>
        <div style="width: 15%; font-weight: 900;">Add Another Registration</div>
    </div> <hr>

    <div class='Grand'>
        {% for nom,prenom,cni in patientList %}
        <div class="patient"  style='display:flex'>
            <a style='width: 15%;' href="{% url 'usermanagement:patientDetails' nom prenom cni %}"><div>{{nom}}&nbsp;{{prenom}}<br>CNI:{{cni}}</div></a>
            <div style=" width: 70%;">
            {% for p in patients %}
                {% if p.FirstName == nom and p.LastName == prenom and p.CNI_number == cni %}
                <div style="display: flex;">
                    <div style="display: flex; width: 75%;">
                        <div style="width: 15%;">{{p.Date}}</div>
                        <div style="width: 17%;">{{p.Time}}</div>
                        <div style="width: 29%;">{{p.Service}}</div>
                        <div style="width: 23%;">{{p.ConsultationCost}}</div>
                        <div style="width: 23%;">{{p.condition}}</div>
                    </div>
                    <div style="display: flex;">
                        <a href="{% url 'usermanagement:patient_update' p.id %}" class="btn btn-purple">
                            <h6>Update</h6>
                        </a>
                        <a href="{% url 'usermanagement:patient_confirm_delete' p.id %}" class="btn btn-purple">
                            <h6>Delete</h6>
                        </a>
                    </div>
                </div>
                {% else %}
                {% endif %}
                {% endfor %} </div>
            <div><a
                href="{% url 'usermanagement:NewRegistration' nom prenom cni %}" class="btn btn-purple">
                <h6>New Registration</h6>
                </a></div>
        </div>
        <hr>
        {% endfor %}
    </div>
</div>

{% endblock %}